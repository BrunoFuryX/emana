var lastScrollTop=0;jQuery(window).scroll(function(t){var e=jQuery(this).scrollTop();e>150?(jQuery("body").addClass("moving"),e>lastScrollTop?jQuery("body").addClass("moving--down"):jQuery("body").removeClass("moving--down"),lastScrollTop=e):jQuery("body").removeClass("moving")}),$(".showcase__list[data-carousel=true]")&&$(".showcase__list[data-carousel=true]").each(function(){$(this).find(".showcase__item--empty").remove(),$(this).not(".slick-initialized").slick({mobileFirst:!1,slidesToShow:4,slidesToScroll:4,prevArrow:'<button aria-label="prev" type="button" class="slick-prev"><</button>',nextArrow:'<button aria-label="prev" type="button" class="slick-next">></button>',responsive:[{breakpoint:424,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:767,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:991,settings:{slidesToShow:4,slidesToScroll:4}}]})}),$(".banner--javascript .banner__list")&&$(".banner--javascript .banner__list").not(".slick-initialized").slick({mobileFirst:!1,infinite:!1,slidesToShow:1,slidesToScroll:1,prevArrow:'<button aria-label="prev" type="button" class="slick-prev"><</button>',nextArrow:'<button aria-label="next" type="button" class="slick-next">></button>',responsive:[{breakpoint:424,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:767,settings:{slidesToShow:1,slidesToScroll:1}}]}),$(".banner--grid .banner__list")&&$(".banner--grid .banner__list").not(".slick-initialized").slick({mobileFirst:!0,slidesToShow:1,slidesToScroll:1,prevArrow:'<button type="button" aria-label="prev" class="slick-prev"><</button>',nextArrow:'<button type="button" aria-label="next" class="slick-next">></button>',responsive:[{breakpoint:424,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:767,settings:{slidesToShow:4,slidesToScroll:4}}]});var button=$("#bt-submit-comments");if(button){var buttonAction=$('<button class="comments__button" type="button">Avaliar</button>');button.after(buttonAction),buttonAction.click(()=>{button.trigger("click")})}function debounce(t){var e;return function(i){e&&clearTimeout(e),e=setTimeout(t,200,i)}}function navigationHiddenResize(){var t=$(".menu--navigation .menu__ul--nv1").outerWidth(),e=0;$(".menu--navigation .menu__item--nv1").removeClass("menu__item--hidden"),$(".menu--navigation .menu__item--nv1").each(function(){(e+=$(this).outerWidth())>t&&$(this).addClass("menu__item--hidden")})}function navigationAlign(){$(".menu--navigation").each(function(){$(this).find(".menu--nv2").removeClass("menu--rtl"),$(this).find(".menu--nv2").each(function(){var t=$(this).closest(".menu--nv1").outerWidth();$(this).offset().left+$(this).outerWidth()>t&&$(this).addClass("menu--rtl")})})}var childs=Array.from(document.querySelectorAll(".menu__item--has-child"));childs.forEach(t=>{t.addEventListener("click",t=>{var e=t.target;if(e.classList.contains("menu__item--has-child")){var i=e.getAttribute("aria-expanded");"true"!==i&&"false"!==i&&(i="false"),e.setAttribute("aria-expanded","true"!==i),$(e).find("> .menu--sub").slideToggle()}},!1)}),window.addEventListener("resize",debounce(function(t){navigationHiddenResize(),navigationAlign()})),navigationHiddenResize(),navigationAlign(),$(".button--menu").on("click",function(){$("body").addClass("menu__open")}),$(".button__close--navigation").on("click",function(){$("body").removeClass("menu__open")}),$(".rulers__list").not(".slick-initialized").slick({mobileFirst:!0,slidesToShow:1,slidesToScroll:1,infinite:!1,prevArrow:'<button type="button" aria-label="prev" class="slick-prev"><</button>',nextArrow:'<button type="button" aria-label="next" class="slick-next">></button>',responsive:[{breakpoint:767,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:991,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:1023,settings:{slidesToShow:4,slidesToScroll:4}}]});var $=$tray;if("function"==typeof $){function loadThumb(){var t=$(".produto-imagem-miniaturas");if(t.length){t.hide();var e=t.find("img, .icon-video");let i;$(".thumbs").length&&$(".thumbs").remove(),e.length&&(i='<div class="thumbs">',i+='<ul class="thumbs__list">',e.each((t,e)=>{i+=createThumb($(e).attr("src"),t)}),i+="</ul>",i+="</div>",t.after(i),$(document).trigger("thumbs:start"),$(".thumbs a").click(e=>{let i=$(e.currentTarget).attr("data-index");selectThumb(i),$(e.currentTarget).find(".thumb__video").length?$("#colVideo").show():($($("a",t).eq(i)).mouseover().click(),$("#colVideo").hide()),e.preventDefault()}),selectThumb("0"))}}function selectThumb(t){$(".thumbs li").removeClass("thumbs__item--actived"),$(`.thumbs [data-index=${t}]`).closest("li").addClass("thumbs__item--actived")}function createThumb(t,e){return t?`<li class="thumbs__item"><a class="thumbs__link" data-index="${e}" href="#${e}"><img class="thumbs__image" src="${t}" /></a></li>`:`<li class="thumbs__item"><a class="thumbs__link" data-index="${e}" href="#${e}"><span class="thumb__video"></span></a></li>`}$(document).ready(function(){$(window).ajaxComplete(function(t,e,i){i&&-1!==i.url.indexOf("variant_gallery")&&loadThumb()}),loadThumb()})}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiY29yZS9pbmRleC5qcyIsImNvcmUvY29uZmlnL2V2ZW50cy5qcyIsImNvcmUvcGx1Z2lucy9zY3JvbGxpbmcuanMiLCJhc3NldHMvbW9kdWxlcy9jb3B5cmlnaHQvaW5kZXguanMiLCJhc3NldHMvbW9kdWxlcy9idXktdG9nZXRoZXIvaW5kZXguanMiLCJhc3NldHMvbW9kdWxlcy9mb290ZXIvaW5kZXguanMiLCJhc3NldHMvbW9kdWxlcy9oZWFkZXIvaW5kZXguanMiLCJhc3NldHMvbW9kdWxlcy9tYWluL2luZGV4LmpzIiwiYXNzZXRzL21vZHVsZXMvbmF2aWdhdGlvbi9pbmRleC5qcyIsImFzc2V0cy9tb2R1bGVzL3BhcnRuZXJzL2luZGV4LmpzIiwiYXNzZXRzL21vZHVsZXMvcHJvZHVjdHMtdmlzaXRlZC9pbmRleC5qcyIsImFzc2V0cy9tb2R1bGVzL3Nob3djYXNlL2luZGV4LmpzIiwiYXNzZXRzL3BhZ2VzL3BhZ2UtY2F0YWxvZy9pbmRleC5qcyIsImFzc2V0cy9wYWdlcy9wYWdlLWRlcG9pbWVudG9zL2luZGV4LmpzIiwiYXNzZXRzL3BhZ2VzL3BhZ2UtaG9tZS9pbmRleC5qcyIsImFzc2V0cy9wYWdlcy9wYWdlLW5vdGljaWFzL2luZGV4LmpzIiwiYXNzZXRzL3BhZ2VzL3BhZ2UtcHJvZHVjdC9pbmRleC5qcyIsImFzc2V0cy9zbmlwcGV0cy9hdHRlbmRhbmNlL2luZGV4LmpzIiwiYXNzZXRzL3NuaXBwZXRzL2Jhbm5lci9pbmRleC5qcyIsImFzc2V0cy9zbmlwcGV0cy9icmVhZGNydW1iL2luZGV4LmpzIiwiYXNzZXRzL3NuaXBwZXRzL2J1dHRvbi9pbmRleC5qcyIsImFzc2V0cy9zbmlwcGV0cy9jYXJ0L2luZGV4LmpzIiwiYXNzZXRzL3NuaXBwZXRzL2NvbW1lbnRzL2luZGV4LmpzIiwiYXNzZXRzL21vZHVsZXMvZmlsdGVyL2luZGV4LmpzIiwiYXNzZXRzL3NuaXBwZXRzL2N1c3RvbWVyL2luZGV4LmpzIiwiYXNzZXRzL3NuaXBwZXRzL2ljb24vaW5kZXguanMiLCJhc3NldHMvc25pcHBldHMvbG9nby9pbmRleC5qcyIsImFzc2V0cy9zbmlwcGV0cy9tZW51L2luZGV4LmpzIiwiYXNzZXRzL3NuaXBwZXRzL21vZGFsL2luZGV4LmpzIiwiYXNzZXRzL3NuaXBwZXRzL25ld3NsZXR0ZXIvaW5kZXguanMiLCJhc3NldHMvc25pcHBldHMvcGFnaW5hdGUvaW5kZXguanMiLCJhc3NldHMvc25pcHBldHMvcHJvZHVjdC9pbmRleC5qcyIsImFzc2V0cy9zbmlwcGV0cy9wcm9kdWN0LXRhYnMvaW5kZXguanMiLCJhc3NldHMvc25pcHBldHMvcmF0aW5nLXNob3J0L2luZGV4LmpzIiwiYXNzZXRzL3NuaXBwZXRzL3J1bGVycy9pbmRleC5qcyIsImFzc2V0cy9zbmlwcGV0cy9zZWFyY2gvaW5kZXguanMiLCJhc3NldHMvc25pcHBldHMvc2hhcmUvaW5kZXguanMiLCJhc3NldHMvc25pcHBldHMvc2xpY2svaW5kZXguanMiLCJhc3NldHMvc25pcHBldHMvc29jaWFscy9pbmRleC5qcyIsImFzc2V0cy9zbmlwcGV0cy90aHVtYnMvaW5kZXguanMiLCJhc3NldHMvc25pcHBldHMvdGl0bGUvaW5kZXguanMiLCJhc3NldHMvc25pcHBldHMvdG9vbGJhci9pbmRleC5qcyIsImFzc2V0cy9zbmlwcGV0cy9mYWtlLXNlbGVjdC9pbmRleC5qcyJdLCJuYW1lcyI6WyJsYXN0U2Nyb2xsVG9wIiwialF1ZXJ5Iiwid2luZG93Iiwic2Nyb2xsIiwiZXZlbnQiLCJzdCIsInRoaXMiLCJzY3JvbGxUb3AiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiJCIsImVhY2giLCJmaW5kIiwicmVtb3ZlIiwibm90Iiwic2xpY2siLCJtb2JpbGVGaXJzdCIsInNsaWRlc1RvU2hvdyIsInNsaWRlc1RvU2Nyb2xsIiwicHJldkFycm93IiwibmV4dEFycm93IiwicmVzcG9uc2l2ZSIsImJyZWFrcG9pbnQiLCJzZXR0aW5ncyIsImluZmluaXRlIiwiYnV0dG9uIiwiYnV0dG9uQWN0aW9uIiwiYWZ0ZXIiLCJjbGljayIsInRyaWdnZXIiLCJkZWJvdW5jZSIsImZ1bmMiLCJ0aW1lciIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJuYXZpZ2F0aW9uSGlkZGVuUmVzaXplIiwid2lkdGhOYXZpZ2F0aW9uIiwib3V0ZXJXaWR0aCIsIndpZHRoQ3VycmVudCIsIm5hdmlnYXRpb25BbGlnbiIsIm5hdiIsImNsb3Nlc3QiLCJvZmZzZXQiLCJsZWZ0IiwiY2hpbGRzIiwiQXJyYXkiLCJmcm9tIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImNoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsInRhcmdldCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiZXhwYW5kZWQiLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJzbGlkZVRvZ2dsZSIsImUiLCJvbiIsIiR0cmF5IiwibG9hZFRodW1iIiwidGh1bWJzIiwibGVuZ3RoIiwiaGlkZSIsImltYWdlcyIsImh0bWwiLCJpbmRleCIsIml0ZW0iLCJjcmVhdGVUaHVtYiIsImF0dHIiLCJjdXJyZW50VGFyZ2V0Iiwic2VsZWN0VGh1bWIiLCJzaG93IiwiZXEiLCJtb3VzZW92ZXIiLCJwcmV2ZW50RGVmYXVsdCIsInNyYyIsInJlYWR5IiwiYWpheENvbXBsZXRlIiwieGhyIiwidXJsIiwiaW5kZXhPZiJdLCJtYXBwaW5ncyI6IkFBMkJBLElBQUlBLGNBQWdCLEVBQ3BCQyxPQUFPQyxRQUFRQyxPQUFPLFNBQVVDLEdBQzVCLElBQUlDLEVBQUtKLE9BQU9LLE1BQU1DLFlBRWxCRixFQUFLLEtBQ0xKLE9BQU8sUUFBUU8sU0FBUyxVQUNwQkgsRUFBS0wsY0FDTEMsT0FBTyxRQUFRTyxTQUFTLGdCQUV4QlAsT0FBTyxRQUFRUSxZQUFZLGdCQUUvQlQsY0FBZ0JLLEdBRWhCSixPQUFPLFFBQVFRLFlBQVksWUFhL0JDLEVBQUUsd0NBQ0ZBLEVBQUUsdUNBQXVDQyxLQUFLLFdBQzFDRCxFQUFFSixN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QUkwQixtQkFHUkosWUFBWSxPQUt4QixTQUFTQSxZQUFZTCxHQUNqQjNELEVBQUUsY0FBY0QsWUFBWSx5QkFDNUJDLHlCQUF5QjJELE1BQVU1QixRQUFRLE1BQU1qQyxTQUFTLHlCQUc5RCxTQUFVK0QsWUFBWVEsRUFBSVYsR0FDdEIsT0FBSVUsa0VBQ3dFVixhQUFpQkEsc0NBQTBDVSxpRkFFNURWLGFBQWlCQSxpREFoRWhHM0QsRUFBRXFDLFVBQVVpQyxNQUFNLFdBQ2R0RSxFQUFFUixRQUFRK0UsYUFBYSxTQUFVN0UsRUFBTzhFLEVBQUszRCxHQUN0Q0EsSUFDa0QsSUFBOUNBLEVBQVM0RCxJQUFJQyxRQUFRLG9CQUNwQnJCLGNBSVpBIiwic291cmNlc0NvbnRlbnQiOlsiICIsIi8vIGltcG9ydCBTY3JvbGxpbmcgZnJvbSAnLi9wbHVnaW5zL3Njcm9sbGluZyc7XG4vLyBpbXBvcnQgQXJpYSBmcm9tICcuL3BsdWdpbnMvYXJpYSc7XG4vLyBpbXBvcnQgb2JqZWN0Rml0SW1hZ2VzIGZyb20gJ29iamVjdC1maXQtaW1hZ2VzJztcbi8vIGltcG9ydCBDdXN0b21FdmVudCBmcm9tICcuL3BsdWdpbnMvY3VzdG9tLWV2ZW50cyc7XG5cbiAgICAvLyB2YXIgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcblxuICAgIC8vIC8vIEN1c3RvbSBFdmVudHNcbiAgICAvLyBDdXN0b21FdmVudCgpO1xuXG4gICAgLy8gLy8gQWRkIFNjcm9sbGluZyBwYWdlIGJvZHlcbiAgICAvLyBTY3JvbGxpbmcoKTtcblxuICAgIC8vIC8vIE9iamVjdCBGaXRcbiAgICAvLyBvYmplY3RGaXRJbWFnZXMoKTtcblxuICAgIC8vIC8vIEFyaWEgXG4gICAgLy8gQXJpYSgpO1xuXG4gICAgLy8gLy8gQWRkIENsYXNzIEFmdGVyIGxvYWRcbiAgICAvLyBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3ByZWxvYWQnKTtcblxuICAgIC8vICR0cmF5KCdbZGF0YS10cmF5LWxvZ2luXScpLmNsaWNrKChldnQpID0+IHsgZXZ0LnByZXZlbnREZWZhdWx0KCk7ICR0cmF5KCd0cmF5LWxvZ2luJykuc2hvdygpOyB9KTtcblxuIiwiLy8gZXhwb3J0IHZhciBDQVJUX1VQREFURSA9ICdUUkFZOkNBUlRfVVBEQVRFJzsiLCJ2YXIgbGFzdFNjcm9sbFRvcCA9IDA7XG5qUXVlcnkod2luZG93KS5zY3JvbGwoZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIHN0ID0galF1ZXJ5KHRoaXMpLnNjcm9sbFRvcCgpO1xuXG4gICAgaWYgKHN0ID4gMTUwKSB7XG4gICAgICAgIGpRdWVyeSgnYm9keScpLmFkZENsYXNzKCdtb3ZpbmcnKTtcbiAgICAgICAgaWYgKHN0ID4gbGFzdFNjcm9sbFRvcCkge1xuICAgICAgICAgICAgalF1ZXJ5KCdib2R5JykuYWRkQ2xhc3MoJ21vdmluZy0tZG93bicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgalF1ZXJ5KCdib2R5JykucmVtb3ZlQ2xhc3MoJ21vdmluZy0tZG93bicpO1xuICAgICAgICB9XG4gICAgICAgIGxhc3RTY3JvbGxUb3AgPSBzdDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBqUXVlcnkoJ2JvZHknKS5yZW1vdmVDbGFzcygnbW92aW5nJyk7XG4gICAgfVxufSk7XG4iLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIgIiwiXG4gaWYoJCgnLnNob3djYXNlX19saXN0W2RhdGEtY2Fyb3VzZWw9dHJ1ZV0nKSkge1xuICAgICQoJy5zaG93Y2FzZV9fbGlzdFtkYXRhLWNhcm91c2VsPXRydWVdJykuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICAkKHRoaXMpLmZpbmQoJy5zaG93Y2FzZV9faXRlbS0tZW1wdHknKS5yZW1vdmUoKTtcbiAgICAgICAgJCh0aGlzKS5ub3QoJy5zbGljay1pbml0aWFsaXplZCcpLnNsaWNrKHtcbiAgICAgICAgICAgIG1vYmlsZUZpcnN0OiBmYWxzZSxcbiAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogNCxcbiAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiA0LFxuICAgICAgICAgICAgcHJldkFycm93OiBgPGJ1dHRvbiBhcmlhLWxhYmVsPVwicHJldlwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInNsaWNrLXByZXZcIj48PC9idXR0b24+YCxcbiAgICAgICAgICAgIG5leHRBcnJvdzogYDxidXR0b24gYXJpYS1sYWJlbD1cInByZXZcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJzbGljay1uZXh0XCI+PjwvYnV0dG9uPmAsXG4gICAgICAgICAgICByZXNwb25zaXZlOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50OiA0MjQsXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDc2NyxcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAzXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtwb2ludDogOTkxLFxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiA0LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDQgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF0gICBcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgXG4gfVxuIiwiIiwiIiwiICIsIiIsIiIsIiIsIlxuaWYoJCgnLmJhbm5lci0tamF2YXNjcmlwdCAuYmFubmVyX19saXN0JykpIHtcbiQoJy5iYW5uZXItLWphdmFzY3JpcHQgLmJhbm5lcl9fbGlzdCcpLm5vdCgnLnNsaWNrLWluaXRpYWxpemVkJykuc2xpY2soe1xuICAgIG1vYmlsZUZpcnN0OiBmYWxzZSxcbiAgICBpbmZpbml0ZTogZmFsc2UsXG4gICAgc2xpZGVzVG9TaG93OiAxLFxuICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxuICAgIHByZXZBcnJvdzogYDxidXR0b24gYXJpYS1sYWJlbD1cInByZXZcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJzbGljay1wcmV2XCI+PDwvYnV0dG9uPmAsXG4gICAgbmV4dEFycm93OiBgPGJ1dHRvbiBhcmlhLWxhYmVsPVwibmV4dFwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInNsaWNrLW5leHRcIj4+PC9idXR0b24+YCxcbiAgICByZXNwb25zaXZlOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDQyNCxcbiAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDc2NyxcbiAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICBdICAgXG59KTtcbn1cblxuXG5pZigkKCcuYmFubmVyLS1ncmlkIC5iYW5uZXJfX2xpc3QnKSkge1xuJCgnLmJhbm5lci0tZ3JpZCAuYmFubmVyX19saXN0Jykubm90KCcuc2xpY2staW5pdGlhbGl6ZWQnKS5zbGljayh7XG4gICAgbW9iaWxlRmlyc3Q6IHRydWUsXG4gICAgc2xpZGVzVG9TaG93OiAxLFxuICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxuICAgIHByZXZBcnJvdzogYDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGFyaWEtbGFiZWw9XCJwcmV2XCIgY2xhc3M9XCJzbGljay1wcmV2XCI+PDwvYnV0dG9uPmAsXG4gICAgbmV4dEFycm93OiBgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgYXJpYS1sYWJlbD1cIm5leHRcIiBjbGFzcz1cInNsaWNrLW5leHRcIj4+PC9idXR0b24+YCxcbiAgICByZXNwb25zaXZlOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDQyNCxcbiAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAzLFxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDc2NyxcbiAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiA0LFxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiA0ICAgXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICBdICAgXG59KTtcbn0iLCIiLCIiLCIiLCJcblxuXG52YXIgYnV0dG9uID0gJCgnI2J0LXN1Ym1pdC1jb21tZW50cycpO1xuXG5pZihidXR0b24pIHtcbiAgICB2YXIgYnV0dG9uQWN0aW9uID0gJChgPGJ1dHRvbiBjbGFzcz1cImNvbW1lbnRzX19idXR0b25cIiB0eXBlPVwiYnV0dG9uXCI+QXZhbGlhcjwvYnV0dG9uPmApO1xuICAgIGJ1dHRvbi5hZnRlcihidXR0b25BY3Rpb24pO1xuXG4gICAgYnV0dG9uQWN0aW9uLmNsaWNrKCgpID0+IHtcbiAgICAgICAgYnV0dG9uLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgfSk7XG59XG4iLCIiLCJcbiAiLCIiLCIiLCJcblxuXG5mdW5jdGlvbiBkZWJvdW5jZShmdW5jKXtcbiAgICB2YXIgdGltZXI7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgICAgaWYodGltZXIpIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jLDIwMCxldmVudCk7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gbmF2aWdhdGlvbkhpZGRlblJlc2l6ZSgpIHtcbiAgICB2YXIgd2lkdGhOYXZpZ2F0aW9uID0gJCgnLm1lbnUtLW5hdmlnYXRpb24gLm1lbnVfX3VsLS1udjEnKS5vdXRlcldpZHRoKCk7XG4gICAgdmFyIHdpZHRoQ3VycmVudCA9IDA7XG4gICAgJCgnLm1lbnUtLW5hdmlnYXRpb24gLm1lbnVfX2l0ZW0tLW52MScpLnJlbW92ZUNsYXNzKCdtZW51X19pdGVtLS1oaWRkZW4nKTtcbiAgICAkKCcubWVudS0tbmF2aWdhdGlvbiAubWVudV9faXRlbS0tbnYxJykuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICB3aWR0aEN1cnJlbnQgKz0gJCh0aGlzKS5vdXRlcldpZHRoKCk7XG4gICAgICAgIGlmKHdpZHRoQ3VycmVudCA+IHdpZHRoTmF2aWdhdGlvbikge1xuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnbWVudV9faXRlbS0taGlkZGVuJyk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gbmF2aWdhdGlvbkFsaWduKCkge1xuICAgICQoJy5tZW51LS1uYXZpZ2F0aW9uJykuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICAkKHRoaXMpLmZpbmQoJy5tZW51LS1udjInKS5yZW1vdmVDbGFzcygnbWVudS0tcnRsJyk7XG4gICAgICAgICQodGhpcykuZmluZCgnLm1lbnUtLW52MicpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBuYXYgPSAkKHRoaXMpLmNsb3Nlc3QoJy5tZW51LS1udjEnKS5vdXRlcldpZHRoKCk7XG4gICAgICAgICAgICB2YXIgbGVmdCA9ICQodGhpcykub2Zmc2V0KCkubGVmdCArICQodGhpcykub3V0ZXJXaWR0aCgpO1xuXG4gICAgICAgICAgICBpZihsZWZ0ID4gbmF2KSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnbWVudS0tcnRsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pXG59XG5cbnZhciBjaGlsZHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51X19pdGVtLS1oYXMtY2hpbGQnKSk7XG5cbmNoaWxkcy5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgIGNoaWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gZXZ0LnRhcmdldDtcbiAgICAgICAgaWYodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbWVudV9faXRlbS0taGFzLWNoaWxkJykpIHtcbiAgICAgICAgICAgIHZhciBleHBhbmRlZCA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKTtcbiAgICAgICAgICAgIGlmKGV4cGFuZGVkICE9PSAndHJ1ZScgJiYgZXhwYW5kZWQgIT09ICdmYWxzZScpIGV4cGFuZGVkID0gJ2ZhbHNlJztcbiAgICAgICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBleHBhbmRlZCA9PT0gJ3RydWUnID8gZmFsc2UgOiB0cnVlKTtcbiAgICAgICAgICAgICQodGFyZ2V0KS5maW5kKCc+IC5tZW51LS1zdWInKS5zbGlkZVRvZ2dsZSgpO1xuICAgICAgICB9XG4gICAgfSwgZmFsc2UpO1xufSk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBkZWJvdW5jZShmdW5jdGlvbihlKXtcbiAgICBuYXZpZ2F0aW9uSGlkZGVuUmVzaXplKCk7XG4gICAgbmF2aWdhdGlvbkFsaWduKCk7XG59KSk7XG5cbm5hdmlnYXRpb25IaWRkZW5SZXNpemUoKTtcbm5hdmlnYXRpb25BbGlnbigpO1xuXG5cbiQoJy5idXR0b24tLW1lbnUnKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XG4gICAgJCgnYm9keScpLmFkZENsYXNzKCdtZW51X19vcGVuJylcbn0pO1xuXG4kKCcuYnV0dG9uX19jbG9zZS0tbmF2aWdhdGlvbicpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcbiAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ21lbnVfX29wZW4nKVxufSk7IiwiIiwiIiwiIiwiIiwiXG4vLyBpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuXG4vLyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbigpe1xuXG4vLyAgICAgdmFyIHRhYnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdC10YWJzJyk7XG4vLyAgICAgaWYodGFicyl7XG4vLyAgICAgICAgIHZhciB1cmxzID0gQXJyYXkuZnJvbSh0YWJzLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXVybF0nKSk7XG5cbi8vICAgICAgICAgdXJscy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4vLyAgICAgICAgICAgICB2YXIgdXJsID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdXJsJyk7XG4vLyAgICAgICAgICAgICBheGlvcy5nZXQodXJsKVxuLy8gICAgICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiBkYXRhLmRhdGEpXG4vLyAgICAgICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IGVsZW1lbnQuaW5uZXJIVE1MID0gZGF0YSk7XG4vLyAgICAgICAgIH0pO1xuXG4vLyAgICAgICAgIHZhciBjdXN0b21UYWJzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvZHVjdC10YWJzLS1jdXN0b20gLnByb2R1Y3QtdGFic19fbGluaycpKTtcblxuLy8gICAgICAgICBjdXN0b21UYWJzLmZvckVhY2goKGN1c3RvbVRhYikgPT4ge1xuLy8gICAgICAgICAgICAgY3VzdG9tVGFiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuLy8gICAgICAgICAgICAgICAgIHZhciBocmVmID0gZXZ0LmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG4vLyAgICAgICAgICAgICAgICAgdmFyIGhhc2ggPSBocmVmLm1hdGNoKC9eW14jXSojKC4qKS8pWzFdO1xuXG4vLyAgICAgICAgICAgICAgICAgaWYoaGFzaCkge1xuLy8gICAgICAgICAgICAgICAgICAgICB2YXIgY29udGVudHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9kQm94JykpO1xuLy8gICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMkeyBoYXNoIH1gKTtcblxuLy8gICAgICAgICAgICAgICAgICAgICBjb250ZW50cy5mb3JFYWNoKChjb250ZW50KSA9PiBjb250ZW50LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZGlzcGxheTpub25lJykpO1xuLy8gICAgICAgICAgICAgICAgICAgICBpZihjdXJyZW50KSBjdXJyZW50LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZGlzcGxheTogYmxvY2snKTtcblxuLy8gICAgICAgICAgICAgICAgICAgICBjdXN0b21UYWJzLmZvckVhY2goKGN1c3RvbVRhYikgPT4gY3VzdG9tVGFiLmNsYXNzTGlzdC5yZW1vdmUoJ29uJykpO1xuLy8gICAgICAgICAgICAgICAgICAgICBldnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdvbicpO1xuXG4vLyAgICAgICAgICAgICAgICAgfVxuXG4vLyAgICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4vLyAgICAgICAgICAgICB9KTtcbi8vICAgICAgICAgfSk7XG5cbi8vICAgICAgICAgaWYoY3VzdG9tVGFicy5sZW5ndGgpIHtcbi8vICAgICAgICAgICAgIGN1c3RvbVRhYnNbMF0uY2xhc3NMaXN0LmFkZCgnb24nKTtcbi8vICAgICAgICAgfVxuLy8gICAgIH1cbi8vIH0pO1xuXG4iLCIiLCJcbiBcbiQoJy5ydWxlcnNfX2xpc3QnKS5ub3QoJy5zbGljay1pbml0aWFsaXplZCcpLnNsaWNrKHtcbiAgICBtb2JpbGVGaXJzdDogdHJ1ZSxcbiAgICBzbGlkZXNUb1Nob3c6IDEsXG4gICAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gICAgaW5maW5pdGU6IGZhbHNlLFxuICAgIHByZXZBcnJvdzogYDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGFyaWEtbGFiZWw9XCJwcmV2XCIgY2xhc3M9XCJzbGljay1wcmV2XCI+PDwvYnV0dG9uPmAsXG4gICAgbmV4dEFycm93OiBgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgYXJpYS1sYWJlbD1cIm5leHRcIiBjbGFzcz1cInNsaWNrLW5leHRcIj4+PC9idXR0b24+YCxcbiAgICByZXNwb25zaXZlOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDc2NyxcbiAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAyLFxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAyXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDk5MSxcbiAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAzLFxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDEwMjMsXG4gICAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogNCxcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogNFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXSAgIFxufSk7IiwiIiwiIiwiIiwiIiwiXG5cbnZhciAkID0gJHRyYXk7XG5pZiggdHlwZW9mICQgPT0gJ2Z1bmN0aW9uJykge1xuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XG4gICAgICAgICQod2luZG93KS5hamF4Q29tcGxldGUoZnVuY3Rpb24oIGV2ZW50LCB4aHIsIHNldHRpbmdzICl7XG4gICAgICAgICAgICBpZihzZXR0aW5ncykge1xuICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLnVybC5pbmRleE9mKCd2YXJpYW50X2dhbGxlcnknKSAhPT0gIC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWRUaHVtYigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGxvYWRUaHVtYigpO1xuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gIGxvYWRUaHVtYigpIHtcbiAgICAgICAgdmFyICB0aHVtYnMgID0gICQoJy5wcm9kdXRvLWltYWdlbS1taW5pYXR1cmFzJyk7XG5cbiAgICAgICAgaWYodGh1bWJzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGh1bWJzLmhpZGUoKTtcblxuICAgICAgICAgICAgdmFyICAgaW1hZ2VzICA9ICB0aHVtYnMuZmluZCgnaW1nLCAuaWNvbi12aWRlbycpO1xuICAgICAgICAgICAgbGV0ICAgICBodG1sO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZigkKCcudGh1bWJzJykubGVuZ3RoKSAkKCcudGh1bWJzJykucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgIGlmKGltYWdlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBodG1sICA9ICBgPGRpdiBjbGFzcz1cInRodW1ic1wiPmA7XG4gICAgICAgICAgICAgICAgaHRtbCAgKz0gIGA8dWwgY2xhc3M9XCJ0aHVtYnNfX2xpc3RcIj5gO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGltYWdlcy5lYWNoKChpbmRleCwgaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBodG1sICArPSAgY3JlYXRlVGh1bWIoJChpdGVtKS5hdHRyKCdzcmMnKSwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaHRtbCAgKz0gIGA8L3VsPmA7XG4gICAgICAgICAgICAgICAgaHRtbCAgKz0gIGA8L2Rpdj5gO1xuICAgICAgICAgICAgICAgIHRodW1icy5hZnRlcihodG1sKTtcblxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLnRyaWdnZXIoXCJ0aHVtYnM6c3RhcnRcIik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgJCgnLnRodW1icyBhJykuY2xpY2soKGV2dCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSAkKGV2dC5jdXJyZW50VGFyZ2V0KS5hdHRyKCdkYXRhLWluZGV4Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0VGh1bWIoaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQoZXZ0LmN1cnJlbnRUYXJnZXQpLmZpbmQoJy50aHVtYl9fdmlkZW8nKS5sZW5ndGgpIHsgXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjY29sVmlkZW8nKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCQoJ2EnLCB0aHVtYnMpLmVxKGluZGV4KSkubW91c2VvdmVyKCkuY2xpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNjb2xWaWRlbycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9KTtcdFx0XHRcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBzZWxlY3RUaHVtYignMCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHNlbGVjdFRodW1iKGluZGV4KSB7XG4gICAgICAgICQoYC50aHVtYnMgbGlgKS5yZW1vdmVDbGFzcygndGh1bWJzX19pdGVtLS1hY3RpdmVkJyk7XG4gICAgICAgICQoYC50aHVtYnMgW2RhdGEtaW5kZXg9JHtpbmRleH1dYCkuY2xvc2VzdCgnbGknKS5hZGRDbGFzcygndGh1bWJzX19pdGVtLS1hY3RpdmVkJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gIGNyZWF0ZVRodW1iKHNyYyxpbmRleCkge1xuICAgICAgICBpZiAoc3JjKSB7XG4gICAgICAgICAgICByZXR1cm4gIGA8bGkgY2xhc3M9XCJ0aHVtYnNfX2l0ZW1cIj48YSBjbGFzcz1cInRodW1ic19fbGlua1wiIGRhdGEtaW5kZXg9XCIke2luZGV4fVwiIGhyZWY9XCIjJHtpbmRleH1cIj48aW1nIGNsYXNzPVwidGh1bWJzX19pbWFnZVwiIHNyYz1cIiR7c3JjfVwiIC8+PC9hPjwvbGk+YDtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICByZXR1cm4gYDxsaSBjbGFzcz1cInRodW1ic19faXRlbVwiPjxhIGNsYXNzPVwidGh1bWJzX19saW5rXCIgZGF0YS1pbmRleD1cIiR7aW5kZXh9XCIgaHJlZj1cIiMke2luZGV4fVwiPjxzcGFuIGNsYXNzPVwidGh1bWJfX3ZpZGVvXCI+PC9zcGFuPjwvYT48L2xpPmA7XG4gICAgICAgIH1cbiAgICB9XG59IiwiIiwiICIsIlxuXG4vLyBmdW5jdGlvbiBGYWtlU2VsZWN0KCkge1xuLy8gICAgICQoJ3NlbGVjdCcpLmVhY2goZnVuY3Rpb24oKXtcbi8vICAgICAgICAgaWYoJCh0aGlzKS5jbG9zZXN0KCcuZmFrZS1zZWxlY3QnKS5sZW5ndGggPT09IDApIHtcbi8vICAgICAgICAgICAgIHZhciB0ZXh0ID0gJCh0aGlzKS5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS50ZXh0KCk7XG4vLyAgICAgICAgICAgICB2YXIgZmFrZSA9ICQoJzxkaXYgY2xhc3M9XCJmYWtlLXNlbGVjdFwiPicpO1xuLy8gICAgICAgICAgICAgdmFyIGxhYmVsID0gJCgnPHNwYW4gY2xhc3M9XCJmYWtlLXNlbGVjdF9fbGFiZWxcIj4nKS50ZXh0KHRleHQpO1xuLy8gICAgICAgICAgICAgdmFyIGNzc0NsYXNzID0gJCh0aGlzKS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJyk7XG5cbi8vICAgICAgICAgICAgIGNzc0NsYXNzLmZvckVhY2goKGl0ZW0pID0+IHtcbi8vICAgICAgICAgICAgICAgICBpZihpdGVtICE9PSAnJykge1xuLy8gICAgICAgICAgICAgICAgICAgICBmYWtlLmFkZENsYXNzKGl0ZW0pO1xuLy8gICAgICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgIH0pXG5cbi8vICAgICAgICAgICAgIGZha2UucHJlcGVuZChsYWJlbCk7XG4vLyAgICAgICAgICAgICAkKHRoaXMpLmFmdGVyKGZha2UpO1xuLy8gICAgICAgICAgICAgZmFrZS5hcHBlbmQodGhpcyk7XG5cbi8vICAgICAgICAgICAgICQodGhpcykuY2hhbmdlKCgpID0+IHsgbGFiZWwudGV4dCgkKHRoaXMpLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLnRleHQoKSkgfSk7XG4vLyAgICAgICAgIH1cbi8vICAgICB9KTtcbi8vIH1cblxuLy8gRmFrZVNlbGVjdCgpO1xuXG4vLyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdGQUtFU0VMRUNUJywgKCkgPT4geyBGYWtlU2VsZWN0KCkgfSwgZmFsc2UpOyJdfQ==